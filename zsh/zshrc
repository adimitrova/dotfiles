#
# Executes commands at the start of an interactive session.
#
# Authors:
#   Sorin Ionescu <sorin.ionescu@gmail.com>
#

# Source Prezto.
if [[ -s "${ZDOTDIR:-$HOME}/.zprezto/init.zsh" ]]; then
  source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"
fi

# Command line keymappings
bindkey -M viins 'kj' vi-cmd-mode

bindkey -M viins '^u' backward-kill-line
bindkey -M viins '^w' backward-kill-word

bindkey -M viins '^r' backward-word
bindkey -M viins '^f' forward-word

bindkey -M viins '^e' end-of-line
bindkey -M viins '^b' beginning-of-line

bindkey -M viins '^n' history-substring-search-down
bindkey -M viins '^p' history-substring-search-up

# Adjust fpath to load custom functions
fpath=($HOME/.zfunc $fpath)
autoload -Uz $HOME/.zfunc/*(:t)

# Load zmv
autoload -U zmv

# Source nvm
[ -s $HOME/.nvm/nvm.sh ] && source $HOME/.nvm/nvm.sh && nvm use stable > /dev/null 2>&1

# Load aliases
[ -f $HOME/.alias ] && source $HOME/.alias

# Init rbenv
if command -v rbenv > /dev/null 2>&1; then
    eval "$(rbenv init -)"
fi
